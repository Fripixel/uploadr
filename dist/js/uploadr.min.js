!function(e){var t={settings:null,button:null,getSettings:function(){return t.settings},getButton:function(){return t.button},load:function(n){t.settings=n,t.setCounter(n.qty),t.decrement(),e(".uploadr").on("click","a.close",function(n){n.preventDefault(),e(this).closest(".thumb").fadeOut("fast",function(){e(this).remove(),t.increment(),t.enable()})}),t.onClick()},enable:function(){t.button.css({"pointer-events":"auto",opacity:"1"})},onClick:function(){var n=t.getSettings();e(n.buttonID).on("click",function(){t.button=e(this),t.events(n)})},disable:function(){t.button.css({"pointer-events":"none",opacity:"0.5"})},setCounter:function(e){t.counter=e},increment:function(){return t.counter++},decrement:function(){return t.counter--},events:function(n){var o=n.inputName,i=n.multiple?n.multiple:null,c=n.accept,a=e("<input />",{type:"file","class":"hidden",accept:c,multiple:i,name:o,value:"xxx"}),r=e("<li />",{"class":"thumb loaded"}).append(a);a.trigger("click"),a.on("change",function(o){var i=o.target.files,c=e("<div/>",{"class":"loader"});r.append(c),n.qty>0&&t.decrement()<=0&&t.disable(),e.each(i,function(n,o){t.render(o).done(function(t){c.html(t),e("body").css("cursor","auto")})}),e("#preview").append(r)})},clean:function(){e("body").css("cursor","wait")},render:function(t){var n=e.Deferred(),o=new FileReader;return o.onload=function(t){e("body").css("cursor","auto");var o=t.target.result,i="background-image:url("+o+");",c=e("<i/>",{"class":"fa fa-times-circle"}),a=e("<a/>",{href:"javascript:;","class":"close"}).html(c),r=e("<img />",{"class":"upload-img",style:i}),u=r.add(a);n.resolve(u)},o.onerror=function(){n.reject("Imagem n√£o pode ser renderizada.")},o.onprogress=function(t){e("body").css("cursor","wait");t.total,t.loaded;t.lengthComputable},o.readAsDataURL(t),n.promise()}};e.fn.uploadr=function(n){var o={buttonID:"#addfile",inputName:"images[]",accept:"image/x-png, image/gif, image/jpeg",multiple:null,qty:2},i=e.extend({},o,n);return this.each(function(){t.load(i)})}}(jQuery);