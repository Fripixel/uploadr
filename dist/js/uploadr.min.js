!function(e){var a={load:function(n){e(".uploadr").on("click","a.close",function(a){a.preventDefault(),e(this).parent(".thumb").fadeOut("fast",function(){e(this).remove()})}),e(n.buttonID).on("click",function(){var t=n.inputName,i=n.multiple?n.multiple:null,r=n.accept,o=e("<input />",{type:"file","class":"hidden",accept:r,multiple:i,name:t}),l=e("<li />",{"class":"thumb loaded"}).append(o);o.trigger("click"),o.on("change",function(n){var t=n.target.files,i=e("<div/>",{"class":"loader"});l.append(i),e.each(t,function(e,n){a.render(n).done(function(e){i.html(e)})})}),e("#preview").append(l)})},render:function(a){var n=e.Deferred(),t=new FileReader;return t.onload=function(a){e("body").css("cursor","auto");var t=a.target.result,i="background-image:url("+t+");",r=e("<i/>",{"class":"fa fa-times-circle"}),o=e("<a/>",{href:"javascript:;","class":"close"}).html(r),l=e("<img />",{"class":"upload-img",style:i}),c=l.add(o);n.resolve(c)},t.onerror=function(){n.reject("Imagem n√£o pode ser renderizada.")},t.onprogress=function(a){e("body").css("cursor","wait");a.total,a.loaded;a.lengthComputable},t.readAsDataURL(a),n.promise()}};e.fn.uploadr=function(n){var t={buttonID:"#addfile",inputName:"images[]",accept:"image/x-png, image/gif, image/jpeg",multiple:null},i=e.extend({},t,n);return this.each(function(){a.load(i)})}}(jQuery);