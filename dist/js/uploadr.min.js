!function(e){var t={settings:null,button:null,getSettings:function(){return t.settings},getButton:function(){return t.button},load:function(n){t.settings=n,t.setCounter(n.qty),t.decrement(),e(".uploadr").on("click","a.close",function(n){n.preventDefault(),e(this).closest(".thumb").fadeOut("fast",function(){e(this).remove(),t.increment(),t.enable()})}),t.onClick()},enable:function(){t.button.css({"pointer-events":"auto",opacity:"1"})},onClick:function(){var n=t.getSettings();e(n.buttonID).on("click",function(){n.qty>0?(t.decrement()<=0&&(t.button=e(this),t.disable()),t.events(n)):t.events(n)})},disable:function(){t.button.css({"pointer-events":"none",opacity:"0.5"})},setCounter:function(e){t.counter=e},increment:function(){return console.log(t.counter),t.counter++},decrement:function(){return t.counter--},events:function(n){var o=n.inputName,i=n.multiple?n.multiple:null,a=n.accept,c=e("<input />",{type:"file","class":"hidden",accept:a,multiple:i,name:o}),r=e("<li />",{"class":"loaded"}).append(c);c.trigger("click"),c.on("change",function(n){var o=n.target.files,i=e("<div/>",{"class":"loader"});r.append(i),e.each(o,function(e,n){t.render(n).done(function(e){i.html(e),r.addClass("thumb")})})}),e("#preview").append(r)},render:function(t){var n=e.Deferred(),o=new FileReader;return o.onload=function(t){e("body").css("cursor","auto");var o=t.target.result,i="background-image:url("+o+");",a=e("<i/>",{"class":"fa fa-times-circle"}),c=e("<a/>",{href:"javascript:;","class":"close"}).html(a),r=e("<img />",{"class":"upload-img",style:i}),u=r.add(c);n.resolve(u)},o.onerror=function(){n.reject("Imagem n√£o pode ser renderizada.")},o.onprogress=function(t){e("body").css("cursor","wait");t.total,t.loaded;t.lengthComputable},o.readAsDataURL(t),n.promise()}};e.fn.uploadr=function(n){var o={buttonID:"#addfile",inputName:"images[]",accept:"image/x-png, image/gif, image/jpeg",multiple:null,qty:0},i=e.extend({},o,n);return this.each(function(){t.load(i)})}}(jQuery);